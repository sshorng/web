<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>詞語賓果魔法屋</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <style>
        body {
            font-family: 'Noto Serif TC', serif;
            background: #0f0c29;
            background: -webkit-linear-gradient(to right, #24243e, #302b63, #0f0c29);
            background: linear-gradient(to right, #24243e, #302b63, #0f0c29);
            color: #f0f0f0;
            overflow-x: hidden;
        }

        .crystal-ball-container {
            position: relative;
            width: 250px;
            height: 250px;
            margin: 1rem auto;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .crystal-ball {
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, rgba(120, 120, 255, 0.2) 50%, rgba(50, 50, 150, 0.5) 100%);
            border-radius: 50%;
            border: 3px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 15px 5px rgba(255, 255, 255, 0.2), 
                        0 0 35px 15px rgba(100, 100, 255, 0.3), 
                        inset 0 0 20px 5px rgba(200, 200, 255, 0.3);
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .crystal-ball:hover:not(.disabled) {
            transform: scale(1.05);
            box-shadow: 0 0 20px 8px rgba(255, 255, 255, 0.3), 
                        0 0 45px 20px rgba(150, 150, 255, 0.4), 
                        inset 0 0 25px 8px rgba(220, 220, 255, 0.4);
        }

        .crystal-ball-reflection {
            position: absolute;
            top: 15%;
            left: 20%;
            width: 50%;
            height: 25%;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: rotate(-30deg);
            filter: blur(5px);
        }
        
        .word-display {
            font-size: 2.2rem;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #e60073, 0 0 40px #e60073;
            opacity: 0;
            transform: scale(0.5);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            z-index: 10;
            padding: 0 10px;
            text-align: center;
        }

        .word-display.show {
            opacity: 1;
            transform: scale(1);
        }
        
        .sparkle-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            border-radius: 50%;
        }

        .sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 5px white, 0 0 10px white;
            animation: sparkle-anim 1.5s linear;
            opacity: 0;
        }

        @keyframes sparkle-anim {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.5); opacity: 1; }
            100% { transform: scale(0); opacity: 0; }
        }
        
        .history-item {
            background: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 4px;
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }

        .custom-select {
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #fff;
        }
        .custom-select option {
            background-color: #302b63;
            color: #fff;
        }

        .btn-magic {
            background: linear-gradient(45deg, #8a2be2, #4a00e0);
            border: none;
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(138, 43, 226, 0.5);
        }
        .btn-magic:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 0 15px rgba(138, 43, 226, 0.8);
        }
        .btn-magic:disabled {
            background: #555;
            cursor: not-allowed;
            opacity: 0.6;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4 md:p-8">

    <div class="w-full max-w-7xl mx-auto flex flex-col">
        <!-- Header Section -->
        <header class="text-center w-full mb-8">
            <h1 class="text-4xl md:text-5xl font-bold mb-2 text-yellow-300" style="text-shadow: 0 0 10px #fde047;">
                詞語賓果魔法屋
            </h1>
            <p class="text-lg text-gray-300 mb-6">請選擇課次，然後點擊水晶球抽取詞語</p>

            <div class="flex flex-col sm:flex-row justify-center items-center gap-4 w-full max-w-md mx-auto">
                <select id="lesson-select" class="custom-select p-3 rounded-lg text-lg w-full sm:w-auto flex-grow">
                    <option value="">— — 請選擇課次 — —</option>
                </select>
                <button id="reset-btn" class="btn-magic text-white font-bold py-3 px-6 rounded-lg text-lg w-full sm:w-auto">
                    重新開始
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="w-full grid grid-cols-1 md:grid-cols-5 gap-8">
            <!-- Left Column -->
            <div class="flex flex-col items-center text-center md:col-span-2">
                <div id="crystal-ball-container" class="crystal-ball-container">
                    <div id="crystal-ball" class="crystal-ball disabled">
                        <div class="crystal-ball-reflection"></div>
                        <div id="word-display" class="word-display"></div>
                        <div id="sparkle-container" class="sparkle-container"></div>
                    </div>
                </div>
                <div id="counter-area" class="mt-4 text-xl text-yellow-400 h-8 font-bold"></div>
                <p id="message-area" class="text-gray-400 h-6"></p>
            </div>

            <!-- Right Column -->
            <div id="history-container" class="bg-black/20 p-4 md:p-6 rounded-xl shadow-lg h-[60vh] md:h-auto flex-col hidden md:flex md:col-span-3">
                <h2 class="text-2xl font-bold mb-4 border-b-2 border-yellow-300/50 pb-2 flex-shrink-0">已抽出詞語</h2>
                <div class="overflow-y-auto flex-grow pr-2">
                    <div id="history-list"></div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // --- 資料庫 (八年級版) ---
        const lessonsData = {
            "L1": {
                name: "第一課 小詩選",
                words: [
                    { word: "樂陶陶", core_char: "陶", zhuyin: "ㄊㄠˊ", weight: 1 }, { word: "淘金", core_char: "淘", zhuyin: "ㄊㄠˊ", weight: 1 },
                    { word: "嚎啕", core_char: "啕", zhuyin: "ㄊㄠˊ", weight: 2 }, { word: "激起浪花", core_char: "激", zhuyin: "ㄐㄧ", weight: 1 },
                    { word: "激勵", core_char: "激", zhuyin: "ㄐㄧ", weight: 1 }, { word: "繳費", core_char: "繳", zhuyin: "ㄐㄧㄠˇ", weight: 1 },
                    { word: "應邀", core_char: "邀", zhuyin: "ㄧㄠ", weight: 1 }, { word: "屹立不搖", core_char: "搖", zhuyin: "ㄧㄠˊ", weight: 1 },
                    { word: "民謠", core_char: "謠", zhuyin: "ㄧㄠˊ", weight: 1 }, { word: "造謠", core_char: "謠", zhuyin: "ㄧㄠˊ", weight: 1 },
                    { word: "遙不可及", core_char: "遙", zhuyin: "ㄧㄠˊ", weight: 2 }, { word: "拔草", core_char: "拔", zhuyin: "ㄅㄚˊ", weight: 1 },
                    { word: "堅忍不拔", core_char: "拔", zhuyin: "ㄅㄚˊ", weight: 2 }, { word: "提拔", core_char: "拔", zhuyin: "ㄅㄚˊ", weight: 2 },
                    { word: "跋山涉水", core_char: "跋", zhuyin: "ㄅㄚˊ", weight: 2 }, { word: "河堤", core_char: "堤", zhuyin: "ㄊㄧˊ", weight: 1 },
                    { word: "舊事重提", core_char: "提", zhuyin: "ㄊㄧˊ", weight: 1 }, { word: "提神醒腦", core_char: "提", zhuyin: "ㄊㄧˊ", weight: 1 },
                    { word: "醍醐灌頂", core_char: "醍", zhuyin: "ㄊㄧˊ", weight: 3 }, { word: "標題", core_char: "題", zhuyin: "ㄊㄧˊ", weight: 1 },
                    { word: "金榜題名", core_char: "題", zhuyin: "ㄊㄧˊ", weight: 2 }, { word: "曲線", core_char: "曲", zhuyin: "ㄑㄩ", weight: 1 },
                    { word: "曲膝", core_char: "曲", zhuyin: "ㄑㄩ", weight: 1 }, { word: "歌曲", core_char: "曲", zhuyin: "ㄑㄩˇ", weight: 1 },
                    { word: "高歌一曲", core_char: "曲", zhuyin: "ㄑㄩˇ", weight: 1 }, { word: "懸壺濟世", core_char: "懸", zhuyin: "ㄒㄩㄢˊ", weight: 3 },
                    { word: "懸念", core_char: "懸", zhuyin: "ㄒㄩㄢˊ", weight: 2 }, { word: "懸賞", core_char: "懸", zhuyin: "ㄒㄩㄢˊ", weight: 2 },
                    { word: "懸殊", core_char: "懸", zhuyin: "ㄒㄩㄢˊ", weight: 2 }, { word: "懸案", core_char: "懸", zhuyin: "ㄒㄩㄢˊ", weight: 2 }
                ]
            },
            "L2": {
                name: "第二課 古體詩選",
                words: [
                    { word: "綠葉發華滋", core_char: "滋", zhuyin: "ㄗ", weight: 2 }, { word: "滋生", core_char: "滋", zhuyin: "ㄗ", weight: 1 },
                    { word: "滋事", core_char: "滋", zhuyin: "ㄗ", weight: 2 }, { word: "滋味", core_char: "滋", zhuyin: "ㄗ", weight: 1 },
                    { word: "念茲在茲", core_char: "茲", zhuyin: "ㄗ", weight: 3 }, { word: "敬老慈幼", core_char: "慈", zhuyin: "ㄘˊ", weight: 1 },
                    { word: "令慈", core_char: "慈", zhuyin: "ㄘˊ", weight: 2 }, { word: "馨香", core_char: "馨", zhuyin: "ㄒㄧㄣ", weight: 2 },
                    { word: "人聲鼎沸", core_char: "聲", zhuyin: "ㄕㄥ", weight: 2 }, { word: "名聲", core_char: "聲", zhuyin: "ㄕㄥ", weight: 1 },
                    { word: "罄竹難書", core_char: "罄", zhuyin: "ㄑㄧㄥˋ", weight: 3 }, { word: "沾襟", core_char: "沾", zhuyin: "ㄓㄢ", weight: 2 },
                    { word: "滴酒不沾", core_char: "沾", zhuyin: "ㄓㄢ", weight: 1 }, { word: "沾染惡習", core_char: "沾", zhuyin: "ㄓㄢ", weight: 1 },
                    { word: "沾光", core_char: "沾", zhuyin: "ㄓㄢ", weight: 1 }, { word: "砧板", core_char: "砧", zhuyin: "ㄓㄣ", weight: 1 },
                    { word: "黏貼", core_char: "黏", zhuyin: "ㄋㄧㄢˊ", weight: 1 }, { word: "黏土", core_char: "黏", zhuyin: "ㄋㄧㄢˊ", weight: 1 },
                    { word: "拈花微笑", core_char: "拈", zhuyin: "ㄋㄧㄢˊ", weight: 3 }, { word: "拈燈心", core_char: "拈", zhuyin: "ㄋㄧㄢˇ", weight: 3 },
                    { word: "玷汙", core_char: "玷", zhuyin: "ㄉㄧㄢˋ", weight: 2 }, { word: "正襟危坐", core_char: "襟", zhuyin: "ㄐㄧㄣ", weight: 2 },
                    { word: "胸襟", core_char: "襟", zhuyin: "ㄐㄧㄣ", weight: 2 }, { word: "噤若寒蟬", core_char: "噤", zhuyin: "ㄐㄧㄣˋ", weight: 3 },
                    { word: "嗟嘆", core_char: "嗟", zhuyin: "ㄐㄧㄝ", weight: 2 }, { word: "切磋", core_char: "磋", zhuyin: "ㄘㄨㄛ", weight: 1 },
                    { word: "蹉跎", core_char: "蹉", zhuyin: "ㄘㄨㄛ", weight: 2 }, { word: "搓揉雙手", core_char: "搓", zhuyin: "ㄘㄨㄛ", weight: 1 },
                    { word: "遺贈", core_char: "遺", zhuyin: "ㄨㄟˋ", weight: 2 }, { word: "遺失", core_char: "遺", zhuyin: "ㄧˊ", weight: 1 },
                    { word: "遺忘", core_char: "遺", zhuyin: "ㄧˊ", weight: 1 }, { word: "不遺餘力", core_char: "遺", zhuyin: "ㄧˊ", weight: 2 },
                    { word: "路不拾遺", core_char: "遺", zhuyin: "ㄧˊ", weight: 2 }, { word: "遺言", core_char: "遺", zhuyin: "ㄧˊ", weight: 1 },
                    { word: "啞啞吐哀音", core_char: "啞", zhuyin: "ㄧㄚ", weight: 2 }, { word: "聾啞", core_char: "啞", zhuyin: "ㄧㄚˇ", weight: 1 },
                    { word: "沙啞", core_char: "啞", zhuyin: "ㄧㄚˇ", weight: 1 }, { word: "弔喪", core_char: "喪", zhuyin: "ㄙㄤ", weight: 1 },
                    { word: "玩物喪志", core_char: "喪", zhuyin: "ㄙㄤˋ", weight: 2 }, { word: "馨香盈懷袖", core_char: "盈", zhuyin: "ㄧㄥˊ", weight: 2 },
                    { word: "盈餘", core_char: "盈", zhuyin: "ㄧㄥˊ", weight: 1 }, { word: "豐盈", core_char: "盈", zhuyin: "ㄧㄥˊ", weight: 1 },
                    { word: "送致", core_char: "致", zhuyin: "ㄓˋ", weight: 2 }, { word: "致敬", core_char: "致", zhuyin: "ㄓˋ", weight: 1 },
                    { word: "致力", core_char: "致", zhuyin: "ㄓˋ", weight: 1 }, { word: "興致", core_char: "致", zhuyin: "ㄓˋ", weight: 1 }
                ]
            },
            "L3": {
                name: "第三課 土芭樂的生存之道",
                words: [
                    { word: "摘花", core_char: "摘", zhuyin: "ㄓㄞ", weight: 1 }, { word: "摘錄", core_char: "摘", zhuyin: "ㄓㄞ", weight: 1 },
                    { word: "貶謫", core_char: "謫", zhuyin: "ㄓㄜˊ", weight: 2 }, { word: "熾烈", core_char: "熾", zhuyin: "ㄔˋ", weight: 2 },
                    { word: "知識", core_char: "識", zhuyin: "ㄕ", weight: 1 }, { word: "素不相識", core_char: "識", zhuyin: "ㄕˋ", weight: 1 },
                    { word: "愛恨交織", core_char: "織", zhuyin: "ㄓ", weight: 1 }, { word: "辭職", core_char: "職", zhuyin: "ㄓˊ", weight: 1 },
                    { word: "旗幟", core_char: "幟", zhuyin: "ㄓˋ", weight: 2 }, { word: "肉漿", core_char: "漿", zhuyin: "ㄐㄧㄤ", weight: 1 },
                    { word: "誇獎", core_char: "獎", zhuyin: "ㄐㄧㄤˇ", weight: 1 }, { word: "船槳", core_char: "槳", zhuyin: "ㄐㄧㄤˇ", weight: 1 },
                    { word: "果醬", core_char: "醬", zhuyin: "ㄐㄧㄤˋ", weight: 1 }, { word: "彆扭", core_char: "彆", zhuyin: "ㄅㄧㄝˋ", weight: 2 },
                    { word: "憋氣", core_char: "憋", zhuyin: "ㄅㄧㄝ", weight: 1 }, { word: "有利無弊", core_char: "弊", zhuyin: "ㄅㄧˋ", weight: 1 },
                    { word: "作弊", core_char: "弊", zhuyin: "ㄅㄧˋ", weight: 1 }, { word: "盡釋前嫌", core_char: "嫌", zhuyin: "ㄒㄧㄢˊ", weight: 2 },
                    { word: "嫌棄", core_char: "嫌", zhuyin: "ㄒㄧㄢˊ", weight: 1 }, { word: "謙虛", core_char: "謙", zhuyin: "ㄑㄧㄢ", weight: 1 },
                    { word: "抱歉", core_char: "歉", zhuyin: "ㄑㄧㄢˋ", weight: 1 }, { word: "賺人熱淚", core_char: "賺", zhuyin: "ㄓㄨㄢˋ", weight: 2 },
                    { word: "麵攤", core_char: "攤", zhuyin: "ㄊㄢ", weight: 1 }, { word: "攤平", core_char: "攤", zhuyin: "ㄊㄢ", weight: 1 },
                    { word: "海灘", core_char: "灘", zhuyin: "ㄊㄢ", weight: 1 }, { word: "難關", core_char: "難", zhuyin: "ㄋㄢˊ", weight: 1 },
                    { word: "豐腴", core_char: "腴", zhuyin: "ㄩˊ", weight: 2 }, { word: "腴地", core_char: "腴", zhuyin: "ㄩˊ", weight: 2 },
                    { word: "阿諛", core_char: "諛", zhuyin: "ㄩˊ", weight: 3 }, { word: "須臾", core_char: "臾", zhuyin: "ㄩˊ", weight: 3 },
                    { word: "結實纍纍", core_char: "結", zhuyin: "ㄐㄧㄝˊ", weight: 2 }, { word: "肌肉結實", core_char: "結", zhuyin: "ㄐㄧㄝ", weight: 1 },
                    { word: "煞是好聞", core_char: "煞", zhuyin: "ㄕㄚˋ", weight: 2 }, { word: "惡煞", core_char: "煞", zhuyin: "ㄕㄚ", weight: 2 },
                    { word: "煞車", core_char: "煞", zhuyin: "ㄕㄚ", weight: 1 }, { word: "頓悟", core_char: "頓", zhuyin: "ㄉㄨㄣˋ", weight: 2 },
                    { word: "捶胸頓足", core_char: "頓", zhuyin: "ㄉㄨㄣˋ", weight: 2 }, { word: "停頓", core_char: "頓", zhuyin: "ㄉㄨㄣˋ", weight: 1 },
                    { word: "安頓", core_char: "頓", zhuyin: "ㄉㄨㄣˋ", weight: 1 }, { word: "困頓", core_char: "頓", zhuyin: "ㄉㄨㄣˋ", weight: 2 },
                    { word: "痛打一頓", core_char: "頓", zhuyin: "ㄉㄨㄣˋ", weight: 1 }
                ]
            },
            "自1": {
                name: "自學一 世說新語選",
                words: [
                    { word: "以筋刺之", core_char: "筋", zhuyin: "ㄓㄨˋ", weight: 2 }, { word: "愛莫能助", core_char: "助", zhuyin: "ㄓㄨˋ", weight: 1 },
                    { word: "雞肋", core_char: "肋", zhuyin: "ㄌㄜˋ", weight: 2 }, { word: "牛蹄筋", core_char: "筋", zhuyin: "ㄐㄧㄣ", weight: 1 },
                    { word: "橡皮筋", core_char: "筋", zhuyin: "ㄐㄧㄣ", weight: 1 }, { word: "木屐", core_char: "屐", zhuyin: "ㄐㄧ", weight: 2 },
                    { word: "草屐", core_char: "屐", zhuyin: "ㄐㄧ", weight: 2 }, { word: "劍及履及", core_char: "履", zhuyin: "ㄌㄩˇ", weight: 3 },
                    { word: "如履薄冰", core_char: "履", zhuyin: "ㄌㄩˇ", weight: 2 }, { word: "履行", core_char: "履", zhuyin: "ㄌㄩˇ", weight: 1 },
                    { word: "抽屜", core_char: "屜", zhuyin: "ㄊㄧˋ", weight: 1 }, { word: "跟踏", core_char: "跟", zhuyin: "ㄍㄣ", weight: 1 },
                    { word: "輾轉難眠", core_char: "輾", zhuyin: "ㄓㄢˇ", weight: 2 }, { word: "輾轉得知", core_char: "輾", zhuyin: "ㄓㄢˇ", weight: 2 },
                    { word: "輾斃", core_char: "輾", zhuyin: "ㄋㄧㄢˇ", weight: 3 }, { word: "瞋甚", core_char: "瞋", zhuyin: "ㄔㄣ", weight: 3 },
                    { word: "嗔怪", core_char: "嗔", zhuyin: "ㄔㄣ", weight: 3 }, { word: "謹慎", core_char: "慎", zhuyin: "ㄕㄣˋ", weight: 1 },
                    { word: "縝密", core_char: "縝", zhuyin: "ㄓㄣˇ", weight: 3 }, { word: "鎮定", core_char: "鎮", zhuyin: "ㄓㄣˋ", weight: 1 },
                    { word: "乘船", core_char: "乘", zhuyin: "ㄔㄥˊ", weight: 1 }, { word: "乘人之危", core_char: "乘", zhuyin: "ㄔㄥˊ", weight: 2 },
                    { word: "萬乘之國", core_char: "乘", zhuyin: "ㄕㄥˋ", weight: 3 }, { word: "避難", core_char: "難", zhuyin: "ㄋㄢˋ", weight: 1 },
                    { word: "發難", core_char: "難", zhuyin: "ㄋㄢˋ", weight: 2 }, { word: "難民", core_char: "難", zhuyin: "ㄋㄢˋ", weight: 1 },
                    { word: "責難", core_char: "難", zhuyin: "ㄋㄢˋ", weight: 2 }, { word: "為難", core_char: "難", zhuyin: "ㄋㄢˊ", weight: 1 },
                    { word: "難關", core_char: "難", zhuyin: "ㄋㄢˊ", weight: 1 }, { word: "難學", core_char: "難", zhuyin: "ㄋㄢˊ", weight: 1 },
                    { word: "難言之隱", core_char: "難", zhuyin: "ㄋㄢˊ", weight: 2 }
                ]
            },
            "L4": {
                name: "第四課 五柳先生傳",
                words: [
                    { word: "不慕榮利", core_char: "慕", zhuyin: "ㄇㄨˋ", weight: 2 }, { word: "募款", core_char: "募", zhuyin: "ㄇㄨˋ", weight: 1 },
                    { word: "暮色", core_char: "暮", zhuyin: "ㄇㄨˋ", weight: 1 }, { word: "簾幕", core_char: "幕", zhuyin: "ㄇㄨˋ", weight: 1 },
                    { word: "摹帖", core_char: "摹", zhuyin: "ㄇㄛˊ", weight: 2 }, { word: "家貧", core_char: "貧", zhuyin: "ㄆㄧㄣˊ", weight: 1 },
                    { word: "貧血", core_char: "貧", zhuyin: "ㄆㄧㄣˊ", weight: 1 }, { word: "貪贓枉法", core_char: "貪", zhuyin: "ㄊㄢ", weight: 3 },
                    { word: "貪玩", core_char: "貪", zhuyin: "ㄊㄢ", weight: 1 }, { word: "貪官汙吏", core_char: "貪", zhuyin: "ㄊㄢ", weight: 2 },
                    { word: "觀者如堵", core_char: "堵", zhuyin: "ㄉㄨˇ", weight: 2 }, { word: "堵塞", core_char: "堵", zhuyin: "ㄉㄨˇ", weight: 1 },
                    { word: "爭睹", core_char: "睹", zhuyin: "ㄉㄨˇ", weight: 1 }, { word: "打賭", core_char: "賭", zhuyin: "ㄉㄨˇ", weight: 1 },
                    { word: "不蔽風日", core_char: "蔽", zhuyin: "ㄅㄧˋ", weight: 2 }, { word: "蒙蔽", core_char: "蔽", zhuyin: "ㄅㄧˋ", weight: 2 },
                    { word: "敝帚自珍", core_char: "敝", zhuyin: "ㄅㄧˋ", weight: 3 }, { word: "敝姓", core_char: "敝", zhuyin: "ㄅㄧˋ", weight: 2 },
                    { word: "寬敞", core_char: "敞", zhuyin: "ㄔㄤˇ", weight: 1 }, { word: "敞開大門", core_char: "敞", zhuyin: "ㄔㄤˇ", weight: 1 },
                    { word: "短褐穿結", core_char: "褐", zhuyin: "ㄏㄜˊ", weight: 2 }, { word: "褐色", core_char: "褐", zhuyin: "ㄏㄜˊ", weight: 1 },
                    { word: "怒不可遏", core_char: "遏", zhuyin: "ㄜˋ", weight: 3 }, { word: "聲嘶力竭", core_char: "竭", zhuyin: "ㄐㄧㄝˊ", weight: 2 },
                    { word: "揭竿而起", core_char: "揭", zhuyin: "ㄐㄧㄝ", weight: 2 }, { word: "揭露", core_char: "揭", zhuyin: "ㄐㄧㄝ", weight: 1 },
                    { word: "揭幕", core_char: "揭", zhuyin: "ㄐㄧㄝ", weight: 1 }, { word: "簞瓢屢空", core_char: "屢", zhuyin: "ㄌㄩˇ", weight: 2 },
                    { word: "草履", core_char: "履", zhuyin: "ㄌㄩˇ", weight: 1 }, { word: "履約", core_char: "履", zhuyin: "ㄌㄩˇ", weight: 1 },
                    { word: "汲汲營營", core_char: "汲", zhuyin: "ㄐㄧˊ", weight: 2 }, { word: "汲水", core_char: "汲", zhuyin: "ㄐㄧˊ", weight: 1 },
                    { word: "岌岌可危", core_char: "岌", zhuyin: "ㄐㄧˊ", weight: 2 }, { word: "造飲輒盡", core_char: "輒", zhuyin: "ㄓㄜˊ", weight: 2 },
                    { word: "淺嘗輒止", core_char: "輒", zhuyin: "ㄓㄜˊ", weight: 2 }, { word: "賦詩", core_char: "賦", zhuyin: "ㄈㄨˋ", weight: 1 },
                    { word: "賦予", core_char: "賦", zhuyin: "ㄈㄨˋ", weight: 1 }, { word: "稅賦", core_char: "賦", zhuyin: "ㄈㄨˋ", weight: 1 },
                    { word: "稟賦", core_char: "賦", zhuyin: "ㄈㄨˋ", weight: 2 }
                ]
            },
            "L5": {
                name: "第五課 田園之秋選",
                words: [
                    { word: "滂沱", core_char: "滂", zhuyin: "ㄆㄤ", weight: 2 }, { word: "氣勢磅礴", core_char: "磅", zhuyin: "ㄆㄤ", weight: 3 },
                    { word: "磅秤", core_char: "磅", zhuyin: "ㄅㄤˋ", weight: 1 }, { word: "毀謗", core_char: "謗", zhuyin: "ㄅㄤˋ", weight: 2 },
                    { word: "霹靂", core_char: "霹", zhuyin: "ㄆㄧ", weight: 2 }, { word: "劈柴", core_char: "劈", zhuyin: "ㄆㄧ", weight: 1 },
                    { word: "天打雷劈", core_char: "劈", zhuyin: "ㄆㄧ", weight: 1 }, { word: "劈面", core_char: "劈", zhuyin: "ㄆㄧ", weight: 2 },
                    { word: "餓虎攫羊", core_char: "攫", zhuyin: "ㄐㄩㄝˊ", weight: 3 }, { word: "躍躍", core_char: "躍", zhuyin: "ㄩㄝˋ", weight: 2 },
                    { word: "矍然", core_char: "矍", zhuyin: "ㄐㄩㄝˊ", weight: 3 }, { word: "震懾", core_char: "懾", zhuyin: "ㄓㄜˊ", weight: 2 },
                    { word: "攝影", core_char: "攝", zhuyin: "ㄕㄜˋ", weight: 1 }, { word: "躡手躡腳", core_char: "躡", zhuyin: "ㄋㄧㄝˋ", weight: 2 },
                    { word: "聶先生", core_char: "聶", zhuyin: "ㄋㄧㄝˋ", weight: 2 }, { word: "囁嚅", core_char: "囁", zhuyin: "ㄋㄧㄝˋ", weight: 3 },
                    { word: "肆虐", core_char: "肆", zhuyin: "ㄙˋ", weight: 2 }, { word: "肆無忌憚", core_char: "肆", zhuyin: "ㄙˋ", weight: 2 },
                    { word: "酒肆", core_char: "肆", zhuyin: "ㄙˋ", weight: 2 }, { word: "肄業", core_char: "肄", zhuyin: "ㄧˋ", weight: 2 },
                    { word: "雷霆萬鈞", core_char: "鈞", zhuyin: "ㄐㄩㄣ", weight: 3 }, { word: "勢均力敵", core_char: "均", zhuyin: "ㄐㄩㄣ", weight: 2 },
                    { word: "老少均安", core_char: "均", zhuyin: "ㄐㄩㄣ", weight: 1 }, { word: "勻稱", core_char: "勻", zhuyin: "ㄩㄣˊ", weight: 1 },
                    { word: "勻出時間", core_char: "勻", zhuyin: "ㄩㄣˊ", weight: 1 }, { word: "洩洪", core_char: "洩", zhuyin: "ㄒㄧㄝˋ", weight: 1 },
                    { word: "發洩", core_char: "洩", zhuyin: "ㄒㄧㄝˋ", weight: 1 }, { word: "洩密", core_char: "洩", zhuyin: "ㄒㄧㄝˋ", weight: 1 },
                    { word: "一瀉千里", core_char: "瀉", zhuyin: "ㄒㄧㄝˋ", weight: 2 }, { word: "腹瀉", core_char: "瀉", zhuyin: "ㄒㄧㄝˋ", weight: 1 },
                    { word: "行潦", core_char: "潦", zhuyin: "ㄌㄠˇ", weight: 2 }, { word: "潦倒", core_char: "潦", zhuyin: "ㄌㄧㄠˊ", weight: 2 },
                    { word: "撩起裙子", core_char: "撩", zhuyin: "ㄌㄧㄠ", weight: 1 }, { word: "姿態撩人", core_char: "撩", zhuyin: "ㄌㄧㄠˊ", weight: 2 },
                    { word: "星火燎原", core_char: "燎", zhuyin: "ㄌㄧㄠˊ", weight: 2 }
                ]
            },
            "L6": {
                name: "第六課 不要放棄你的夢想",
                words: [
                    { word: "假如", core_char: "假", zhuyin: "ㄐㄧㄚˇ", weight: 1 }, { word: "假髮", core_char: "假", zhuyin: "ㄐㄧㄚˇ", weight: 1 },
                    { word: "狐假虎威", core_char: "假", zhuyin: "ㄐㄧㄚˇ", weight: 2 }, { word: "暑假", core_char: "假", zhuyin: "ㄐㄧㄚˋ", weight: 1 },
                    { word: "應接不暇", core_char: "暇", zhuyin: "ㄒㄧㄚˊ", weight: 2 }, { word: "白璧無瑕", core_char: "瑕", zhuyin: "ㄒㄧㄚˊ", weight: 2 },
                    { word: "瑕疵", core_char: "瑕", zhuyin: "ㄒㄧㄚˊ", weight: 1 }, { word: "遐邇", core_char: "遐", zhuyin: "ㄒㄧㄚˊ", weight: 3 },
                    { word: "松鶴遐齡", core_char: "遐", zhuyin: "ㄒㄧㄚˊ", weight: 3 }, { word: "消耗", core_char: "消", zhuyin: "ㄒㄧㄠ", weight: 1 },
                    { word: "消遣", core_char: "消", zhuyin: "ㄒㄧㄠ", weight: 1 }, { word: "煙消雲散", core_char: "消", zhuyin: "ㄒㄧㄠ", weight: 1 },
                    { word: "銷售", core_char: "銷", zhuyin: "ㄒㄧㄠ", weight: 1 }, { word: "報銷", core_char: "銷", zhuyin: "ㄒㄧㄠ", weight: 1 },
                    { word: "俊俏", core_char: "俏", zhuyin: "ㄑㄧㄠˋ", weight: 1 }, { word: "悄然無聲", core_char: "悄", zhuyin: "ㄑㄧㄠˇ", weight: 2 },
                    { word: "捎信", core_char: "捎", zhuyin: "ㄕㄠ", weight: 2 }, { word: "獨斷獨行", core_char: "獨", zhuyin: "ㄉㄨˊ", weight: 2 },
                    { word: "獨子", core_char: "獨", zhuyin: "ㄉㄨˊ", weight: 1 }, { word: "鰥寡孤獨", core_char: "獨", zhuyin: "ㄉㄨˊ", weight: 3 },
                    { word: "蠟燭", core_char: "燭", zhuyin: "ㄓㄨˊ", weight: 1 }, { word: "洞燭機先", core_char: "燭", zhuyin: "ㄓㄨˊ", weight: 3 },
                    { word: "躑躅", core_char: "躅", zhuyin: "ㄓㄨˊ", weight: 3 }, { word: "接觸", core_char: "觸", zhuyin: "ㄔㄨˋ", weight: 1 },
                    { word: "觸怒", core_char: "觸", zhuyin: "ㄔㄨˋ", weight: 1 }, { word: "觸法", core_char: "觸", zhuyin: "ㄔㄨˋ", weight: 1 },
                    { word: "汙濁", core_char: "濁", zhuyin: "ㄓㄨㄛˊ", weight: 1 }, { word: "豈敢", core_char: "豈", zhuyin: "ㄑㄧˇ", weight: 2 },
                    { word: "覬覦", core_char: "覬", zhuyin: "ㄐㄧˋ", weight: 3 }, { word: "皚皚", core_char: "皚", zhuyin: "ㄞˊ", weight: 2 },
                    { word: "眾口紛紜", core_char: "紜", zhuyin: "ㄩㄣˊ", weight: 2 }, { word: "耕耘", core_char: "耘", zhuyin: "ㄩㄣˊ", weight: 1 },
                    { word: "瞻前顧後", core_char: "瞻", zhuyin: "ㄓㄢ", weight: 2 }, { word: "擔水", core_char: "擔", zhuyin: "ㄉㄢ", weight: 1 },
                    { word: "擔當", core_char: "擔", zhuyin: "ㄉㄢ", weight: 1 }, { word: "重擔", core_char: "擔", zhuyin: "ㄉㄢˋ", weight: 1 },
                    { word: "明目張膽", core_char: "膽", zhuyin: "ㄉㄢˇ", weight: 2 }, { word: "贍養", core_char: "贍", zhuyin: "ㄕㄢˋ", weight: 2 }
                ]
            },
            "自2": {
                name: "自學二 定伯賣鬼",
                words: [
                    { word: "共迭相擔", core_char: "迭", zhuyin: "ㄉㄧㄝˊ", weight: 2 }, { word: "高潮迭起", core_char: "迭", zhuyin: "ㄉㄧㄝˊ", weight: 2 },
                    { word: "瓜瓞綿綿", core_char: "瓞", zhuyin: "ㄉㄧㄝˊ", weight: 3 }, { word: "散佚", core_char: "佚", zhuyin: "ㄧˋ", weight: 2 },
                    { word: "佚文", core_char: "佚", zhuyin: "ㄧˋ", weight: 2 }, { word: "漕渠", core_char: "漕", zhuyin: "ㄘㄠˊ", weight: 2 },
                    { word: "馬槽", core_char: "槽", zhuyin: "ㄘㄠˊ", weight: 1 }, { word: "水槽", core_char: "槽", zhuyin: "ㄘㄠˊ", weight: 1 },
                    { word: "嘈雜", core_char: "嘈", zhuyin: "ㄘㄠˊ", weight: 2 }, { word: "糟糕", core_char: "糟", zhuyin: "ㄗㄠ", weight: 1 },
                    { word: "遭殃", core_char: "遭", zhuyin: "ㄗㄠ", weight: 1 }, { word: "周遭", core_char: "遭", zhuyin: "ㄗㄠ", weight: 1 },
                    { word: "漕漼", core_char: "漼", zhuyin: "ㄘㄨㄟˇ", weight: 3 }, { word: "璀璨", core_char: "璀", zhuyin: "ㄘㄨㄟˇ", weight: 2 },
                    { word: "催促", core_char: "催", zhuyin: "ㄘㄨㄟ", weight: 1 }, { word: "摧折", core_char: "摧", zhuyin: "ㄘㄨㄟ", weight: 2 },
                    { word: "摧毀", core_char: "摧", zhuyin: "ㄘㄨㄟ", weight: 1 }, { word: "咋咋然", core_char: "咋", zhuyin: "ㄗㄜˊ", weight: 3 },
                    { word: "詐騙", core_char: "詐", zhuyin: "ㄓㄚˋ", weight: 1 }, { word: "奸詐", core_char: "詐", zhuyin: "ㄓㄚˋ", weight: 1 },
                    { word: "門衰祚薄", core_char: "祚", zhuyin: "ㄗㄨㄛˋ", weight: 3 }, { word: "背擔", core_char: "擔", zhuyin: "ㄉㄢ", weight: 1 },
                    { word: "擔責任", core_char: "擔", zhuyin: "ㄉㄢ", weight: 1 }, { word: "重擔", core_char: "擔", zhuyin: "ㄉㄢˋ", weight: 1 },
                    { word: "一擔米", core_char: "擔", zhuyin: "ㄉㄢˋ", weight: 1 }, { word: "將非鬼也", core_char: "將", zhuyin: "ㄐㄧㄤ", weight: 2 },
                    { word: "將要", core_char: "將", zhuyin: "ㄐㄧㄤ", weight: 1 }, { word: "將功折罪", core_char: "將", zhuyin: "ㄐㄧㄤ", weight: 2 },
                    { word: "將信將疑", core_char: "將", zhuyin: "ㄐㄧㄤ", weight: 2 }, { word: "名將", core_char: "將", zhuyin: "ㄐㄧㄤˋ", weight: 1 },
                    { word: "上將", core_char: "將", zhuyin: "ㄐㄧㄤˋ", weight: 1 }, { word: "主將", core_char: "將", zhuyin: "ㄐㄧㄤˋ", weight: 1 },
                    { word: "新死", core_char: "新", zhuyin: "ㄒㄧㄣ", weight: 1 }, { word: "新衣服", core_char: "新", zhuyin: "ㄒㄧㄣ", weight: 1 },
                    { word: "新芽", core_char: "新", zhuyin: "ㄒㄧㄣ", weight: 1 }, { word: "汰舊換新", core_char: "新", zhuyin: "ㄒㄧㄣ", weight: 1 },
                    { word: "改過自新", core_char: "新", zhuyin: "ㄒㄧㄣ", weight: 1 }, { word: "因復擔鬼", core_char: "因", zhuyin: "ㄧㄣ", weight: 2 },
                    { word: "因地制宜", core_char: "因", zhuyin: "ㄧㄣ", weight: 2 }, { word: "因襲", core_char: "因", zhuyin: "ㄧㄣ", weight: 2 },
                    { word: "起因", core_char: "因", zhuyin: "ㄧㄣ", weight: 1 }, { word: "因公出差", core_char: "因", zhuyin: "ㄧㄣ", weight: 1 }
                ]
            },
            "L7": {
                name: "第七課 愛蓮說",
                words: [
                    { word: "洗濯", core_char: "濯", zhuyin: "ㄓㄨㄛˊ", weight: 2 }, { word: "拔擢", core_char: "擢", zhuyin: "ㄓㄨㄛˊ", weight: 2 },
                    { word: "雀躍不已", core_char: "躍", zhuyin: "ㄩㄝˋ", weight: 1 }, { word: "照耀", core_char: "耀", zhuyin: "ㄧㄠˋ", weight: 1 },
                    { word: "炫耀", core_char: "耀", zhuyin: "ㄧㄠˋ", weight: 1 }, { word: "妖豔", core_char: "妖", zhuyin: "ㄧㄠ", weight: 2 },
                    { word: "妖怪", core_char: "妖", zhuyin: "ㄧㄠ", weight: 1 }, { word: "夭折", core_char: "夭", zhuyin: "ㄧㄠ", weight: 2 },
                    { word: "肥沃", core_char: "沃", zhuyin: "ㄨㄛˋ", weight: 1 }, { word: "蔓延", core_char: "蔓", zhuyin: "ㄇㄢˋ", weight: 1 },
                    { word: "藤蔓", core_char: "蔓", zhuyin: "ㄇㄢˋ", weight: 1 }, { word: "漫山遍野", core_char: "漫", zhuyin: "ㄇㄢˋ", weight: 2 },
                    { word: "漫不經心", core_char: "漫", zhuyin: "ㄇㄢˋ", weight: 2 }, { word: "慢工出細活", core_char: "慢", zhuyin: "ㄇㄢˋ", weight: 1 },
                    { word: "輕慢", core_char: "慢", zhuyin: "ㄇㄢˋ", weight: 2 }, { word: "樹枝", core_char: "枝", zhuyin: "ㄓ", weight: 1 },
                    { word: "一枝筆", core_char: "枝", zhuyin: "ㄓ", weight: 1 }, { word: "技能", core_char: "技", zhuyin: "ㄐㄧˋ", weight: 1 },
                    { word: "歧義", core_char: "歧", zhuyin: "ㄑㄧˊ", weight: 2 }, { word: "隱居", core_char: "隱", zhuyin: "ㄧㄣˇ", weight: 1 },
                    { word: "穩如泰山", core_char: "穩", zhuyin: "ㄨㄣˇ", weight: 2 }, { word: "十拿九穩", core_char: "穩", zhuyin: "ㄨㄣˇ", weight: 1 },
                    { word: "穩重", core_char: "穩", zhuyin: "ㄨㄣˇ", weight: 1 }, { word: "鮮有聞", core_char: "鮮", zhuyin: "ㄒㄧㄢˇ", weight: 2 },
                    { word: "鮮豔", core_char: "鮮", zhuyin: "ㄒㄧㄢ", weight: 1 }, { word: "新鮮", core_char: "鮮", zhuyin: "ㄒㄧㄢ", weight: 1 },
                    { word: "海鮮", core_char: "鮮", zhuyin: "ㄒㄧㄢ", weight: 1 }, { word: "香遠益清", core_char: "益", zhuyin: "ㄧˋ", weight: 2 },
                    { word: "利益", core_char: "益", zhuyin: "ㄧˋ", weight: 1 }, { word: "延年益壽", core_char: "益", zhuyin: "ㄧˋ", weight: 2 },
                    { word: "隱逸者", core_char: "逸", zhuyin: "ㄧˋ", weight: 2 }, { word: "閒情逸致", core_char: "逸", zhuyin: "ㄧˋ", weight: 2 },
                    { word: "逃逸", core_char: "逸", zhuyin: "ㄧˋ", weight: 1 }, { word: "散逸", core_char: "逸", zhuyin: "ㄧˋ", weight: 2 }
                ]
            },
            "L8": {
                name: "第八課 鳥",
                words: [
                    { word: "胳膊", core_char: "膊", zhuyin: "ㄅㄛˊ", weight: 2 }, { word: "打赤膊", core_char: "膊", zhuyin: "ㄅㄛˊ", weight: 2 },
                    { word: "搏扶搖而直上", core_char: "搏", zhuyin: "ㄅㄛˊ", weight: 3 }, { word: "搏鬥", core_char: "搏", zhuyin: "ㄅㄛˊ", weight: 1 },
                    { word: "手無縛雞之力", core_char: "縛", zhuyin: "ㄈㄨˊ", weight: 2 }, { word: "蜷縮", core_char: "蜷", zhuyin: "ㄑㄩㄢˊ", weight: 2 },
                    { word: "捲畫軸", core_char: "捲", zhuyin: "ㄐㄩㄢˇ", weight: 1 }, { word: "席捲", core_char: "捲", zhuyin: "ㄐㄩㄢˇ", weight: 2 },
                    { word: "孜孜不倦", core_char: "倦", zhuyin: "ㄐㄩㄢˋ", weight: 2 }, { word: "嘹亮", core_char: "嘹", zhuyin: "ㄌㄧㄠˊ", weight: 2 },
                    { word: "官僚", core_char: "僚", zhuyin: "ㄌㄧㄠˊ", weight: 2 }, { word: "同僚", core_char: "僚", zhuyin: "ㄌㄧㄠˊ", weight: 2 },
                    { word: "繚繞", core_char: "繚", zhuyin: "ㄌㄧㄠˊ", weight: 2 }, { word: "遼遠", core_char: "遼", zhuyin: "ㄌㄧㄠˊ", weight: 2 },
                    { word: "明瞭", core_char: "瞭", zhuyin: "ㄌㄧㄠˇ", weight: 1 }, { word: "曳著尾巴", core_char: "曳", zhuyin: "ㄧˋ", weight: 2 },
                    { word: "搖曳", core_char: "曳", zhuyin: "ㄧˋ", weight: 2 }, { word: "洩洪", core_char: "洩", zhuyin: "ㄒㄧㄝˋ", weight: 1 },
                    { word: "洩漏", core_char: "洩", zhuyin: "ㄒㄧㄝˋ", weight: 1 }, { word: "鳥喙", core_char: "喙", zhuyin: "ㄏㄨㄟˋ", weight: 2 },
                    { word: "不容置喙", core_char: "喙", zhuyin: "ㄏㄨㄟˋ", weight: 3 }, { word: "啄食", core_char: "啄", zhuyin: "ㄓㄨㄛˊ", weight: 1 },
                    { word: "斑斕", core_char: "斕", zhuyin: "ㄌㄢˊ", weight: 2 }, { word: "力挽狂瀾", core_char: "瀾", zhuyin: "ㄌㄢˊ", weight: 2 },
                    { word: "夜闌人靜", core_char: "闌", zhuyin: "ㄌㄢˊ", weight: 2 }, { word: "破銅爛鐵", core_char: "爛", zhuyin: "ㄌㄢˋ", weight: 1 },
                    { word: "燦爛", core_char: "爛", zhuyin: "ㄌㄢˋ", weight: 1 }, { word: "穠纖合度", core_char: "纖", zhuyin: "ㄒㄧㄢ", weight: 3 },
                    { word: "殲滅", core_char: "殲", zhuyin: "ㄐㄧㄢ", weight: 2 }, { word: "抽籤", core_char: "籤", zhuyin: "ㄑㄧㄢ", weight: 1 },
                    { word: "書籤", core_char: "籤", zhuyin: "ㄑㄧㄢ", weight: 1 }, { word: "竹籤", core_char: "籤", zhuyin: "ㄑㄧㄢ", weight: 1 },
                    { word: "懺悔", core_char: "懺", zhuyin: "ㄔㄢˋ", weight: 2 }, { word: "一語成讖", core_char: "讖", zhuyin: "ㄔㄣˋ", weight: 3 },
                    { word: "拳著一條腿", core_char: "拳", zhuyin: "ㄑㄩㄢˊ", weight: 2 }, { word: "摩拳擦掌", core_char: "拳", zhuyin: "ㄑㄩㄢˊ", weight: 2 },
                    { word: "入場券", core_char: "券", zhuyin: "ㄑㄩㄢˋ", weight: 1 }, { word: "眷戀", core_char: "眷", zhuyin: "ㄐㄩㄢˋ", weight: 2 },
                    { word: "家眷", core_char: "眷", zhuyin: "ㄐㄩㄢˋ", weight: 2 }, { word: "豢養", core_char: "豢", zhuyin: "ㄏㄨㄢˋ", weight: 3 }
                ]
            },
            "L9": {
                name: "第九課 我在圖書館的一天",
                words: [
                    { word: "迥異", core_char: "迥", zhuyin: "ㄐㄩㄥˇ", weight: 2 }, { word: "炯炯有神", core_char: "炯", zhuyin: "ㄐㄩㄥˇ", weight: 2 },
                    { word: "巡迴", core_char: "迴", zhuyin: "ㄏㄨㄟˊ", weight: 1 }, { word: "迴避", core_char: "迴", zhuyin: "ㄏㄨㄟˊ", weight: 1 },
                    { word: "二樓", core_char: "樓", zhuyin: "ㄌㄡˊ", weight: 1 }, { word: "高樓大廈", core_char: "樓", zhuyin: "ㄌㄡˊ", weight: 1 },
                    { word: "精雕細鏤", core_char: "鏤", zhuyin: "ㄌㄡˋ", weight: 3 }, { word: "屢見不鮮", core_char: "屢", zhuyin: "ㄌㄩˇ", weight: 2 },
                    { word: "棧道", core_char: "棧", zhuyin: "ㄓㄢˋ", weight: 2 }, { word: "客棧", core_char: "棧", zhuyin: "ㄓㄢˋ", weight: 2 },
                    { word: "踐踏", core_char: "踐", zhuyin: "ㄐㄧㄢˋ", weight: 1 }, { word: "實踐", core_char: "踐", zhuyin: "ㄐㄧㄢˋ", weight: 1 },
                    { word: "餞行", core_char: "餞", zhuyin: "ㄐㄧㄢˋ", weight: 2 }, { word: "淺海", core_char: "淺", zhuyin: "ㄑㄧㄢˇ", weight: 1 },
                    { word: "淺顯易懂", core_char: "淺", zhuyin: "ㄑㄧㄢˇ", weight: 1 }, { word: "淺黃", core_char: "淺", zhuyin: "ㄑㄧㄢˇ", weight: 1 },
                    { word: "蕨類", core_char: "蕨", zhuyin: "ㄐㄩㄝˊ", weight: 2 }, { word: "昏厥", core_char: "厥", zhuyin: "ㄐㄩㄝˊ", weight: 2 },
                    { word: "猖獗", core_char: "獗", zhuyin: "ㄐㄩㄝˊ", weight: 3 }, { word: "一蹶不振", core_char: "蹶", zhuyin: "ㄐㄩㄝˊ", weight: 3 },
                    { word: "矩形", core_char: "矩", zhuyin: "ㄐㄩˇ", weight: 1 }, { word: "循規蹈矩", core_char: "矩", zhuyin: "ㄐㄩˇ", weight: 2 },
                    { word: "拒絕", core_char: "拒", zhuyin: "ㄐㄩˋ", weight: 1 }, { word: "抗拒", core_char: "拒", zhuyin: "ㄐㄩˋ", weight: 1 },
                    { word: "火炬", core_char: "炬", zhuyin: "ㄐㄩˋ", weight: 1 }, { word: "慵懶", core_char: "慵", zhuyin: "ㄩㄥ", weight: 2 },
                    { word: "幫傭", core_char: "傭", zhuyin: "ㄩㄥ", weight: 1 }, { word: "無庸置疑", core_char: "庸", zhuyin: "ㄩㄥ", weight: 2 },
                    { word: "平庸", core_char: "庸", zhuyin: "ㄩㄥ", weight: 1 }, { word: "手稿", core_char: "稿", zhuyin: "ㄍㄠˇ", weight: 1 },
                    { word: "槁木死灰", core_char: "槁", zhuyin: "ㄍㄠˇ", weight: 3 }, { word: "搞社團", core_char: "搞", zhuyin: "ㄍㄠˇ", weight: 1 },
                    { word: "閒散", core_char: "散", zhuyin: "ㄙㄢˇ", weight: 1 }, { word: "散沙", core_char: "散", zhuyin: "ㄙㄢˇ", weight: 1 },
                    { word: "煙消雲散", core_char: "散", zhuyin: "ㄙㄢˋ", weight: 1 }, { word: "散心", core_char: "散", zhuyin: "ㄙㄢˋ", weight: 1 },
                    { word: "正襟危坐", core_char: "危", zhuyin: "ㄨㄟˊ", weight: 2 }, { word: "危險", core_char: "危", zhuyin: "ㄨㄟˊ", weight: 1 },
                    { word: "病危", core_char: "危", zhuyin: "ㄨㄟˊ", weight: 1 }
                ]
            },
            "L10": {
                name: "第十課 拆牆",
                words: [
                    { word: "扭腰擺臀", core_char: "扭", zhuyin: "ㄋㄧㄡˇ", weight: 1 }, { word: "扭開門把", core_char: "扭", zhuyin: "ㄋㄧㄡˇ", weight: 1 },
                    { word: "按鈕", core_char: "鈕", zhuyin: "ㄋㄧㄡˇ", weight: 1 }, { word: "小丑", core_char: "丑", zhuyin: "ㄔㄡˇ", weight: 1 },
                    { word: "挨近", core_char: "挨", zhuyin: "ㄞ", weight: 1 }, { word: "挨餓", core_char: "挨", zhuyin: "ㄞˊ", weight: 1 },
                    { word: "挨家挨戶", core_char: "挨", zhuyin: "ㄞ", weight: 2 }, { word: "塵埃", core_char: "埃", zhuyin: "ㄞ", weight: 2 },
                    { word: "由來久矣", core_char: "矣", zhuyin: "ㄧˇ", weight: 2 }, { word: "郵遞", core_char: "遞", zhuyin: "ㄉㄧˋ", weight: 1 },
                    { word: "遞減", core_char: "遞", zhuyin: "ㄉㄧˋ", weight: 1 }, { word: "褫衣", core_char: "褫", zhuyin: "ㄔˇ", weight: 3 },
                    { word: "褫奪公權", core_char: "褫", zhuyin: "ㄔˇ", weight: 3 }, { word: "花秧", core_char: "秧", zhuyin: "ㄧㄤ", weight: 1 },
                    { word: "遭殃", core_char: "殃", zhuyin: "ㄧㄤ", weight: 1 }, { word: "中央", core_char: "央", zhuyin: "ㄧㄤ", weight: 1 },
                    { word: "央求", core_char: "央", zhuyin: "ㄧㄤ", weight: 1 }, { word: "笨拙", core_char: "拙", zhuyin: "ㄓㄨㄛˊ", weight: 1 },
                    { word: "拙作", core_char: "拙", zhuyin: "ㄓㄨㄛˊ", weight: 2 }, { word: "茁壯", core_char: "茁", zhuyin: "ㄓㄨㄛˊ", weight: 1 },
                    { word: "相形見絀", core_char: "絀", zhuyin: "ㄔㄨˋ", weight: 3 }, { word: "否極泰來", core_char: "否", zhuyin: "ㄆㄧˇ", weight: 2 },
                    { word: "臧否人物", core_char: "否", zhuyin: "ㄆㄧˇ", weight: 3 }, { word: "否認", core_char: "否", zhuyin: "ㄈㄡˇ", weight: 1 },
                    { word: "參差", core_char: "參", zhuyin: "ㄘㄣ", weight: 2 }, { word: "參政", core_char: "參", zhuyin: "ㄘㄢ", weight: 1 },
                    { word: "參拜", core_char: "參", zhuyin: "ㄘㄢ", weight: 1 }, { word: "人參", core_char: "參", zhuyin: "ㄕㄣ", weight: 1 },
                    { word: "演奏", core_char: "奏", zhuyin: "ㄗㄡˋ", weight: 1 }, { word: "奏效", core_char: "奏", zhuyin: "ㄗㄡˋ", weight: 1 },
                    { word: "奏摺", core_char: "奏", zhuyin: "ㄗㄡˋ", weight: 2 }, { word: "節奏", core_char: "奏", zhuyin: "ㄗㄡˋ", weight: 1 }
                ]
            },
            "自3": {
                name: "自學三 買春聯",
                words: [
                    { word: "根柢", core_char: "柢", zhuyin: "ㄉㄧˇ", weight: 2 }, { word: "抵住", core_char: "抵", zhuyin: "ㄉㄧˇ", weight: 1 },
                    { word: "抵擋", core_char: "抵", zhuyin: "ㄉㄧˇ", weight: 1 }, { word: "家書抵萬金", core_char: "抵", zhuyin: "ㄉㄧˇ", weight: 2 },
                    { word: "抵達", core_char: "抵", zhuyin: "ㄉㄧˇ", weight: 1 }, { word: "砥行立名", core_char: "砥", zhuyin: "ㄉㄧˇ", weight: 3 },
                    { word: "牴觸", core_char: "牴", zhuyin: "ㄉㄧˇ", weight: 2 }, { word: "詆毀", core_char: "詆", zhuyin: "ㄉㄧˇ", weight: 2 },
                    { word: "嶄新", core_char: "嶄", zhuyin: "ㄓㄢˇ", weight: 1 }, { word: "嶄露鋒芒", core_char: "嶄", zhuyin: "ㄓㄢˇ", weight: 2 },
                    { word: "披荊斬棘", core_char: "斬", zhuyin: "ㄓㄢˇ", weight: 2 }, { word: "大言不慚", core_char: "慚", zhuyin: "ㄘㄢˊ", weight: 2 },
                    { word: "漸入佳境", core_char: "漸", zhuyin: "ㄐㄧㄢˋ", weight: 2 }, { word: "六畜興旺", core_char: "畜", zhuyin: "ㄔㄨˋ", weight: 2 },
                    { word: "儲蓄", core_char: "蓄", zhuyin: "ㄒㄩˋ", weight: 1 }, { word: "蓄髮", core_char: "蓄", zhuyin: "ㄒㄩˋ", weight: 1 },
                    { word: "磨墨", core_char: "磨", zhuyin: "ㄇㄛˊ", weight: 1 }, { word: "好事多磨", core_char: "磨", zhuyin: "ㄇㄛˊ", weight: 2 },
                    { word: "石磨", core_char: "磨", zhuyin: "ㄇㄛˊ", weight: 1 }, { word: "臨摹", core_char: "臨", zhuyin: "ㄌㄧㄣˊ", weight: 2 },
                    { word: "光臨", core_char: "臨", zhuyin: "ㄌㄧㄣˊ", weight: 1 }, { word: "臨危不亂", core_char: "臨", zhuyin: "ㄌㄧㄣˊ", weight: 2 },
                    { word: "侍奉", core_char: "事", zhuyin: "ㄕˋ", weight: 2 }, { word: "多事之秋", core_char: "事", zhuyin: "ㄕˋ", weight: 2 },
                    { word: "打根柢", core_char: "打", zhuyin: "ㄉㄚˇ", weight: 2 }, { word: "打鬥", core_char: "打", zhuyin: "ㄉㄚˇ", weight: 1 },
                    { word: "打電話", core_char: "打", zhuyin: "ㄉㄚˇ", weight: 1 }, { word: "打瞌睡", core_char: "打", zhuyin: "ㄉㄚˇ", weight: 1 },
                    { word: "打鐵趁熱", core_char: "打", zhuyin: "ㄉㄚˇ", weight: 1 }
                ]
            }
        };

        // --- 變數與DOM元素 ---
        const lessonSelect = document.getElementById('lesson-select');
        const crystalBall = document.getElementById('crystal-ball');
        const wordDisplay = document.getElementById('word-display');
        const messageArea = document.getElementById('message-area');
        const counterArea = document.getElementById('counter-area');
        const historyList = document.getElementById('history-list');
        const historyContainer = document.getElementById('history-container');
        const resetBtn = document.getElementById('reset-btn');
        const sparkleContainer = document.getElementById('sparkle-container');

        let currentWordPool = [];
        let drawnWords = [];
        let totalUniqueWords = 0;
        let isDrawing = false; 

        // --- 音效合成器 ---
        const synth = new Tone.Synth({
            oscillator: { type: 'sine' },
            envelope: { attack: 0.005, decay: 0.1, sustain: 0.3, release: 1 }
        }).toDestination();
        
        const sparkleSynth = new Tone.PolySynth(Tone.PluckSynth).toDestination();
        sparkleSynth.set({ volume: -8 });


        // --- 函式 ---
        function populateLessons() {
            for (const key in lessonsData) {
                const option = document.createElement('option');
                option.value = key;
                option.textContent = lessonsData[key].name;
                lessonSelect.appendChild(option);
            }
        }

        function setLesson() {
            const lessonKey = lessonSelect.value;
            drawnWords = [];
            updateHistory();

            if (!lessonKey) {
                currentWordPool = [];
                totalUniqueWords = 0;
                wordDisplay.innerHTML = '';
                wordDisplay.classList.remove('show');
                crystalBall.classList.add('disabled');
                messageArea.textContent = '請先選擇一課來啟動水晶球';
                counterArea.textContent = '';
                return;
            }

            const words = lessonsData[lessonKey].words;
            currentWordPool = [];
            words.forEach(wordObj => {
                for (let i = 0; i < wordObj.weight; i++) {
                    currentWordPool.push(wordObj.word);
                }
            });
            
            totalUniqueWords = new Set(words.map(w => w.word)).size;
            
            crystalBall.classList.remove('disabled');
            wordDisplay.innerHTML = '點我抽詞';
            wordDisplay.classList.add('show');
            messageArea.textContent = `已選擇「${lessonsData[lessonKey].name}」，水晶球已啟動！`;
            counterArea.textContent = `已抽出 0 / ${totalUniqueWords} 個`;
        }

        async function drawWord() {
            if (crystalBall.classList.contains('disabled') || isDrawing) return;
            
            // 解決 iPad 音效問題：在每次使用者互動時檢查並啟動音訊
            if (Tone.context.state !== 'running') {
                await Tone.start();
            }

            isDrawing = true;

            if (currentWordPool.length === 0) {
                messageArea.textContent = '所有詞語都已經抽完囉！';
                wordDisplay.innerHTML = '完成！';
                crystalBall.classList.add('disabled');
                synth.triggerAttackRelease("C5", "0.5");
                isDrawing = false;
                return;
            }

            wordDisplay.classList.remove('show');
            
            const now = Tone.now();
            synth.triggerAttackRelease("G4", "0.2", now);
            synth.triggerAttackRelease("C5", "0.2", now + 0.1);
            synth.triggerAttackRelease("E5", "0.3", now + 0.2);

            setTimeout(() => {
                const randomIndex = Math.floor(Math.random() * currentWordPool.length);
                const selectedWord = currentWordPool[randomIndex];
                
                const lessonKey = lessonSelect.value;
                const wordObj = lessonsData[lessonKey].words.find(w => w.word === selectedWord);
                
                let displayText = wordObj.word;
                if (wordObj.zhuyin && wordObj.core_char) {
                    const replacement = `${wordObj.core_char}<span class="text-lg opacity-80">（${wordObj.zhuyin}）</span>`;
                    displayText = wordObj.word.replace(wordObj.core_char, replacement);
                }

                wordDisplay.innerHTML = displayText;
                wordDisplay.classList.add('show');
                
                createSparkles();

                if (!drawnWords.includes(selectedWord)) {
                    drawnWords.push(selectedWord);
                    updateHistory();
                }

                currentWordPool = currentWordPool.filter(word => word !== selectedWord);
                
                counterArea.textContent = `已抽出 ${drawnWords.length} / ${totalUniqueWords} 個`;
                messageArea.textContent = '水晶球已啟動！';
                
                isDrawing = false;

            }, 400);
        }

        function updateHistory() {
            historyList.innerHTML = '';
            if (drawnWords.length > 0) {
                historyContainer.classList.remove('hidden');
                const reversedWords = [...drawnWords].reverse();
                const lessonKey = lessonSelect.value;
                
                reversedWords.forEach((word, index) => {
                    const wordObj = lessonsData[lessonKey].words.find(w => w.word === word);
                    
                    let displayText = wordObj.word;
                     if (wordObj.zhuyin && wordObj.core_char) {
                        const replacement = `${wordObj.core_char}<span class="text-base opacity-80">（${wordObj.zhuyin}）</span>`;
                        displayText = wordObj.word.replace(wordObj.core_char, replacement);
                    } else if (wordObj.zhuyin) {
                        displayText = `${wordObj.word}（${wordObj.zhuyin}）`;
                    }


                    const item = document.createElement('div');
                    item.className = 'history-item flex items-center gap-4';
                    
                    const numberSpan = document.createElement('span');
                    numberSpan.className = 'text-lg font-bold text-yellow-400/80';
                    numberSpan.textContent = `${drawnWords.length - index}.`;
                    
                    const wordSpan = document.createElement('span');
                    wordSpan.innerHTML = displayText;

                    item.appendChild(numberSpan);
                    item.appendChild(wordSpan);
                    historyList.appendChild(item);
                });
            } else {
                historyContainer.classList.add('hidden');
            }
        }

        function createSparkles() {
            const now = Tone.now();
            for (let i = 0; i < 15; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                const angle = Math.random() * Math.PI * 2;
                const radius = Math.random() * 125;
                sparkle.style.top = `${125 + Math.sin(angle) * radius - 2}px`;
                sparkle.style.left = `${125 + Math.cos(angle) * radius - 2}px`;
                sparkle.style.animationDelay = `${Math.random() * 0.5}s`;
                sparkleContainer.appendChild(sparkle);
                
                sparkleSynth.triggerAttackRelease("C6", "8n", now + i * 0.03);

                setTimeout(() => {
                    sparkle.remove();
                }, 1500);
            }
        }

        // --- 事件監聽 ---
        document.addEventListener('DOMContentLoaded', populateLessons);
        lessonSelect.addEventListener('change', setLesson);
        crystalBall.addEventListener('click', drawWord);
        resetBtn.addEventListener('click', setLesson);

        setLesson();
    </script>
</body>
</html>
